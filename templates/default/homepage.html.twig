{% extends 'base.html.twig' %}

{% block title %}Page d'accueil!{% endblock %}

{% block body %}
    <main class="homepage">
        <h1 class="homepage__title">Troc your time</h1>
        <section class="homepage__presentation">
            <p class="homepage__presentation__content">
                Troc time est une plate-forme de mise en relation qui vise à favoriser l'échange et le service. Publiez des annonces !
                Échanger des services sans commission avec les membres de la communauté !
            </p>
        </section>
        <h2 class="homepage__subtitle">Liste des catégories</h2>
        <ul>
            {% for category in categories %}
                <li>{{category.name}}</li>
                <ul>
                    {% for subCategory in category.subCategories %}
                        <li>{{ subCategory.name }}</li>
                    {% endfor %}
                </ul>
            {% endfor %}
        </ul>
        <h2 class="homepage__subtitle">Liste des annonces</h2>
        <section class="homepage__announcements">
            {% for announcement in announcements %}
                <a href="{{ path('announcement_view', {'id': announcement.id}) }}" class="homepage__announcement__link">
                    <article class="homepage__announcement">
                        <div class="homepage__announcement__author">
                            {% if announcement.profile.filename %}
                                <img src={{ vich_uploader_asset(announcement.profile, 'imageFile')}} alt="image de profil (avatar)" class="homepage__announcement__author__picture">
                            {% else %}
                                <img src="{{ asset('images/profil.jpeg') }}" alt="image de profil (avatar)" class="homepage__announcement__author__picture">
                            {% endif %}
                            <h3 class="homepage__announcement__author__name">{{ announcement.profile.username }}</h3>
                            <p class="homepage__announcement__author__category">{{ announcement.subCategory.name }}</p>
                        </div>
                        <div class="homepage__announcement__content">
                            <h3 class="homepage__announcement__content__title">{{ announcement.title }}</h3>
                            <p class="homepage__announcement__content__text">{{ announcement.description }}</p>
                        </div>
                        <div class="homepage__announcement__date">
                            <p class="homepage__announcement__date__create">Publié le {{ announcement.createdAt|date('d m Y\ à H\\hi') }}</p>
                        </div>
                    </article>
                </a>
            {% endfor %}
        </section>
    </main>
{% endblock %}